<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">

    <!-- Google Jquery CDN -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link type="text/css" rel="stylesheet" href="../css/style.css">

    <!-- Materialize Compiled and minified CSS -->
    <link rel="icon" href="https://www.nationalgeographic.com/content/dam/animals/thumbs/rights-exempt/mammals/p/plains-zebra_thumb.JPG"
        sizes="32x32" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/css/materialize.min.css">
    
    <!-- link to game.js file -->
    <script type="text/javascript" src="../js/game.js"></script>

    <!-- link to game.html file -->
    <a href="game.html"></a>
    <title>Create Character</title>
</head>

<body>
    <div>
        <div class="form-group input-field">
            <label for="namet">Name: </label>
            <input type="text" id="name" name="name">
        </div>
        <br>
        <h3 id="skillPoints"></h3>
        <ul class="skills">
            <li id="Health" value="50">
                <h4 class="skillValStr">Health : 50</h4>
                <button class='btn waves-effect waves-light grey darken-3 white-text' data-skill="Health">-</button>
                <button class='btn waves-effect waves-light grey darken-3 white-text' data-skill="Health">+</button>
            </li>
            <li id="Attack" value="10">
                <h4 class="skillValStr">Attack : 10</h4>
                <button class='btn waves-effect waves-light grey darken-3 white-text' data-skill="Attack">-</button>
                <button class='btn waves-effect waves-light grey darken-3 white-text' data-skill="Attack">+</button>
            </li>
            <li id="Defense" value="10">
                <h4 class="skillValStr">Defense : 10</h4>
                <button class='btn waves-effect waves-light grey darken-3 white-text' data-skill="Defense">-</button>
                <button class='btn waves-effect waves-light grey darken-3 white-text' data-skill="Defense">+</button>
            </li>
        </ul>
    </div>
    <br>
    <button class='btn btn-large waves-effect waves-light grey darken-3 white-text' id="submitBtn">submit</button>


    <script>
        let skillPoints = 10;
        $("#skillPoints").text("Skill Points: " + skillPoints);

        // increase decrease skill value
        $(".skills button").on("click", function (event) {
            event.preventDefault();
            let skill = $(this).attr("data-skill");
            let skillVal = parseInt($("#" + skill).attr("value"));
            if ($(this).text() == "+") {
                if (skillPoints > 0) {
                    skillPoints--;
                    skillVal++;
                }
            } else if ($(this).text() == "-") {
                if (skillVal > 10) {
                    skillPoints++;
                    skillVal--;
                }
            }
            $("#skillPoints").text("Skill Points: " + skillPoints);
            $("#" + skill).attr("value", skillVal.toString());
            $("#" + skill + " .skillValStr").text(skill + " : " + skillVal.toString());
        });

        $("#submitBtn").on("click", function (event) {
            event.preventDefault();
            let newChar = {
                "name": $("#name").val().trim(),
                "health": parseInt($("#Health").attr("value")),
                "attack": parseInt($("#Attack").attr("value")),
                "defense": parseInt($("#Defense").attr("value")),
            }
            console.log(newChar);
            createChar(newChar.name, newChar.health, newChar.attack, newChar.defense);
        });
        function createChar(name, health, attack, defense) {
            $.post("/api/create", {
                name: name,
                health: health,
                attack: attack,
                defense: defense
            }).then(() => {
                location.reload();
            });
        }
    </script>
    <!-- Compiled and minified JavaScript -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0-beta/js/materialize.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/moment.js/2.17.0/moment.min.js" type="text/javascript"></script>
    <script src="https://code.jquery.com/jquery.js"></script>

    <script src="../js/game.js"></script>
</body>

</html>